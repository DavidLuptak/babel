2012-06-16
----------

When investigating babel/3800 I discovered some issues to be addressed
related to options, mainly the fact combining package and global
options has not a well-defined behaviour (the main language sometimes
is the last named one, but sometimes it's not). The doc says you can use
package options OR global options, but this is not enforced and it can
be done without complaint (just with an unexpected behaviour).

Furthermore, ldf files not bundled with babel are not recognized as
global options. So, I've added some code to make sure global options
are properly recognized, an error (or perhaps only a warning, I'm not
sure) is raised if the main language is not the last named one and to
set explicitly the main language in cases like

\documentclass[ngerman]{book}
\usepackage[english,ngerman]{babel}

Oddly, this set english as the main language. Now it complains with a
message saying you have to use

\usepackage[english,main=ngerman]{babel}

To seize the opportunity, I've added another option which I had
already written, to control shorthands (but not yet tested
thoroughly). --jb
